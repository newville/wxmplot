
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>wxmplot Examples &#8212; WXMPLOT: interactive plotting with Python</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/bizstyle.css?v=5283bb3d" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    
    <script src="_static/documentation_options.js?v=3dfe497a"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Speciality wxmplot displays" href="other.html" />
    <link rel="prev" title="ImagePanel: A wx.Panel for Image Display" href="imagepanel.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div style="background-color: #E4EAED; text-align: left; padding: 0px 0px 2px 5px">

    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="other.html" title="Speciality wxmplot displays"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="imagepanel.html" title="ImagePanel: A wx.Panel for Image Display"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">WXMPLOT</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">wxmplot Examples</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="wxmplot-examples">
<span id="ch-examples"></span><h1>wxmplot Examples<a class="headerlink" href="#wxmplot-examples" title="Link to this heading">¶</a></h1>
<p>The <a class="reference internal" href="overview.html#ch-overview"><span class="std std-ref">wxmplot Overview</span></a> showed a few illustrative  examples using <cite>wxmplot</cite>.
Here we show a few more examples.  These and more are given in the <em>examples</em>
directory in the source distribution kit.</p>
<section id="dynamic-examples-not-shown-here">
<h2>Dynamic examples not shown here<a class="headerlink" href="#dynamic-examples-not-shown-here" title="Link to this heading">¶</a></h2>
<p>Several examples that can be found at <a class="reference external" href="https://github.com/newville/wxmplot/tree/master/examples">wxmplot examples</a> are not shown here
either because they show many plots or are otherwise more complex.  They are
worth trying out.</p>
<p><em>demo.py</em> will show several Line plot examples, including a plot which uses
a timer to simulate a dynamic plot, updating the plot as fast as it can -
typically 20 to 30 times per second, depending on your machine.</p>
<p><em>stripchart.py</em> also shows dynamic, time-based plot.</p>
<p><em>scope_mode_function.py</em> and <em>scope_mode_generator.py</em> both
show dynamic plots with data uddated with a user-supplied function that either
returns or yields datasets to update plot traces.</p>
<p><em>theme_compare.py</em> renders the same plot with a selection of different themes.</p>
<p><em>image_scroll.py</em> shows an updating set of images on a single display.
Perhaps surprisingly, this can be faster than updating the line plots.</p>
</section>
<section id="scatterplot-example">
<h2>Scatterplot Example<a class="headerlink" href="#scatterplot-example" title="Link to this heading">¶</a></h2>
<p>An example scatterplot can be produced with a script like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">#</span>
<span class="c1"># scatterplot example, with lassoing and</span>
<span class="c1"># a user-level lasso-callback</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wx</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span>

<span class="n">x</span>   <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">/</span><span class="mf">20.0</span> <span class="o">+</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">y</span>   <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">onlasso</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;:: lasso &#39;</span><span class="p">,</span> <span class="n">selected</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">()</span>

<span class="n">pframe</span> <span class="o">=</span> <span class="n">wxmplot</span><span class="o">.</span><span class="n">PlotFrame</span><span class="p">()</span>
<span class="n">pframe</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Scatter Plot&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                   <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;$ x\, \mathrm{(\AA)}$&#39;</span><span class="p">,</span>
                   <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;$ y\, \mathrm{(\AA^{-1})}$&#39;</span><span class="p">)</span>
<span class="n">pframe</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">lasso_callback</span> <span class="o">=</span> <span class="n">onlasso</span>
<span class="n">pframe</span><span class="o">.</span><span class="n">write_message</span><span class="p">(</span><span class="s1">&#39;WXMPlot PlotFrame example: Try Help-&gt;Quick Reference&#39;</span><span class="p">)</span>
<span class="n">pframe</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</pre></div>
</div>
<p>and gives a plot (after having selected by “lasso”ing) that looks like this:</p>
<a class="reference internal image-reference" href="_images/scatterplot.png"><img alt="_images/scatterplot.png" src="_images/scatterplot.png" style="width: 85%;" />
</a>
</section>
<section id="plotting-with-errorbars">
<h2>Plotting with errorbars<a class="headerlink" href="#plotting-with-errorbars" title="Link to this heading">¶</a></h2>
<p>An example plotting with error bars:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">npts</span> <span class="o">=</span> <span class="mi">41</span>
<span class="n">x</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">npts</span><span class="p">)</span>
<span class="n">y</span>  <span class="o">=</span> <span class="mf">0.4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">npts</span><span class="p">)</span>
<span class="n">dy</span> <span class="o">=</span> <span class="mf">0.03</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">npts</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x (mm)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">viewpad</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Plot with error bars&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>gives:</p>
<a class="reference internal image-reference" href="_images/errorbar.png"><img alt="_images/errorbar.png" src="_images/errorbar.png" style="width: 85%;" />
</a>
</section>
<section id="plotting-data-from-a-datafile">
<h2>Plotting data from a datafile<a class="headerlink" href="#plotting-data-from-a-datafile" title="Link to this heading">¶</a></h2>
<p>Reading data with <cite>numpy.loadtext</cite> and plotting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">os</span><span class="w"> </span><span class="kn">import</span> <span class="n">path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;xafs.dat&#39;</span>
<span class="n">thisdir</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">dat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">thisdir</span><span class="p">,</span> <span class="n">fname</span><span class="p">))</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">dat</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">dat</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;E (eV)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;$\mu(E)$&#39;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;As K edge&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Data from </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
<p>gives:</p>
<a class="reference internal image-reference" href="_images/datafile_plot.png"><img alt="_images/datafile_plot.png" src="_images/datafile_plot.png" style="width: 85%;" />
</a>
</section>
<section id="plotting-data-with-discrete-values">
<span id="example-discrete"></span><h2>Plotting data with discrete values<a class="headerlink" href="#plotting-data-with-discrete-values" title="Link to this heading">¶</a></h2>
<p>Some data has discrete values, or a set of enumerations.  For such
data, you can set</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">example setting yticks for categorical data</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">0.06</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">y</span><span class="p">[</span><span class="mi">84</span><span class="p">:</span><span class="mi">86</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="n">y</span><span class="p">[</span><span class="mi">94</span><span class="p">:]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="n">y</span><span class="p">[</span><span class="mi">67</span><span class="p">:</span><span class="mi">69</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">y</span><span class="p">[</span><span class="mi">43</span><span class="p">:</span><span class="mi">45</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="n">display</span> <span class="o">=</span> <span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;t (s)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Y label&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;discrete y data&#39;</span><span class="p">,</span>
                  <span class="n">drawstyle</span><span class="o">=</span><span class="s1">&#39;steps-post&#39;</span><span class="p">)</span>

<span class="n">display</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_ytick_labels</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;zero&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span>
                           <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;four&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;five&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="s1">&#39;six&#39;</span><span class="p">})</span>
<span class="n">display</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
<p>gives:</p>
<a class="reference internal image-reference" href="_images/discrete_data.png"><img alt="_images/discrete_data.png" src="_images/discrete_data.png" style="width: 85%;" />
</a>
</section>
<section id="using-left-and-right-axes">
<span id="example-leftright"></span><h2>Using Left and Right Axes<a class="headerlink" href="#using-left-and-right-axes" title="Link to this heading">¶</a></h2>
<p>An example using both right and left axes with different scales can be
created with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">#</span>
<span class="c1">#  example plot with left and right axes with different scales</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">201</span>
<span class="n">x</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">3.4</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">0.2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">noise</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="mi">92</span> <span class="o">+</span> <span class="mi">65</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">16.</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">/</span><span class="mf">7e3</span><span class="p">)</span> <span class="o">+</span> <span class="n">noise</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>


<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Test 2 Axes with different y scales&#39;</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x (mm)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;y1&#39;</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=-</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y2label</span><span class="o">=</span><span class="s1">&#39;y2&#39;</span><span class="p">,</span> <span class="n">yaxes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>and gives a plot that looks like this:</p>
<a class="reference internal image-reference" href="_images/two_axes.png"><img alt="_images/two_axes.png" src="_images/two_axes.png" style="width: 85%;" />
</a>
</section>
<section id="using-3-and-4-y-axes">
<span id="example-multiple-yaxes"></span><h2>Using 3 and 4 Y Axes<a class="headerlink" href="#using-3-and-4-y-axes" title="Link to this heading">¶</a></h2>
<p>If 2 different scales is not enough, you extend that to 3 or even 4 separate Y Axes with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">#</span>
<span class="c1">#  example plot with 3 different right-hand axes with different y scales</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pytz</span>

<span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">501</span>
<span class="n">x</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

<span class="c1"># note: timestamps can be datetime objects or matplotlib dates</span>
<span class="c1"># which are floating point days since the 1970 epoch.</span>
<span class="c1"># using time.time() values (here, starting 2024-March-9 11AM)</span>
<span class="c1"># and defining the timezone</span>
<span class="n">tstamp</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1710000000</span> <span class="o">+</span>  <span class="n">x</span><span class="o">*</span><span class="mf">100.0</span><span class="p">)</span><span class="o">/</span><span class="mf">86400.</span>
<span class="n">tzone</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">3.4</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">0.2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">noise</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">0.041</span> <span class="o">+</span> <span class="n">noise</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">y3</span> <span class="o">=</span> <span class="mf">0.04</span> <span class="o">+</span> <span class="mf">0.07</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">46.</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">/</span><span class="mf">7e3</span><span class="p">)</span> <span class="o">+</span> <span class="n">noise</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.0003</span><span class="p">)</span>
<span class="n">y4</span> <span class="o">=</span> <span class="o">-</span><span class="mf">210.</span> <span class="o">+</span> <span class="mf">0.6</span><span class="o">*</span><span class="n">x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">/</span><span class="mf">7e3</span><span class="p">)</span> <span class="o">+</span> <span class="n">noise</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>


<span class="n">disp</span> <span class="o">=</span> <span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tstamp</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Test 4 Axes with different y scales&#39;</span><span class="p">,</span>
               <span class="n">show_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">yaxes_tracecolor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">use_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timezone</span><span class="o">=</span><span class="n">tzone</span><span class="p">,</span>
               <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;date/time&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;signal 1&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;ylabel&#39;</span><span class="p">,</span>
               <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>

<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tstamp</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y2label</span><span class="o">=</span><span class="s1">&#39;y2label&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="n">yaxes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
       <span class="n">use_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s1">&#39;steps-post&#39;</span><span class="p">)</span>

<span class="n">disp</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_ytick_labels</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;off&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;staged&#39;</span><span class="p">,</span>
                            <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;ready&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;running&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;finished&#39;</span><span class="p">},</span>
                            <span class="n">yaxes</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tstamp</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">y3label</span><span class="o">=</span><span class="s1">&#39;y3 label&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;signal 3&#39;</span><span class="p">,</span> <span class="n">use_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">yaxes</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tstamp</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">y4label</span><span class="o">=</span><span class="s1">&#39;y4 label&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;signal 4&#39;</span><span class="p">,</span> <span class="n">use_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">yaxes</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>(note the use of <cite>yaxes_tracecolor=True</cite>). This gives a plot like this:</p>
<a class="reference internal image-reference" href="_images/multiple_yaxes.png"><img alt="_images/multiple_yaxes.png" src="_images/multiple_yaxes.png" style="width: 85%;" />
</a>
</section>
<section id="plotting-with-alpha-fill-to-show-area-under-a-curve">
<h2>Plotting with alpha-fill to show area under a curve<a class="headerlink" href="#plotting-with-alpha-fill-to-show-area-under-a-curve" title="Link to this heading">¶</a></h2>
<p>It is sometimes desirable to fill the area below a curve, typically to 0.
Using the <cite>alpha</cite> value can be especially helpful for this, so that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mf">1.1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;thing1&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x (mm)&#39;</span><span class="p">)</span>
<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;thing2&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.40</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>will give:</p>
<a class="reference internal image-reference" href="_images/plot_alphafill_to_zero.png"><img alt="_images/plot_alphafill_to_zero.png" src="_images/plot_alphafill_to_zero.png" style="width: 85%;" />
</a>
</section>
<section id="plotting-with-alpha-fill-to-show-uncertainty">
<h2>Plotting with alpha-fill to show uncertainty<a class="headerlink" href="#plotting-with-alpha-fill-to-show-uncertainty" title="Link to this heading">¶</a></h2>
<p>Another use of a filled band is to fill between two traces.  An important
use of this is to show uncertainties in a function, similar to showing
errorbars above.  If <cite>dy</cite> and <cite>fill=True</cite> are both given, then a band
between <cite>y-dy</cite> and <cite>y+dy</cite> will be filled, as with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dy1</span> <span class="o">=</span> <span class="mf">0.04</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>

<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mf">1.1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dy2</span> <span class="o">=</span> <span class="mf">0.07</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>

<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">dy1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;thing1&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;x (mm)&#39;</span><span class="p">)</span>
<span class="n">wi</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">dy2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;thing2&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.40</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>which gives:</p>
<a class="reference internal image-reference" href="_images/plot_alphafill_to_dy.png"><img alt="_images/plot_alphafill_to_dy.png" src="_images/plot_alphafill_to_dy.png" style="width: 85%;" />
</a>
<p>Of course, you can use that to recast showing a band between any two curves
by assigning the average of the 2 curves to <cite>y</cite> and half the difference to
<cite>dy</cite>, and perhaps setting <cite>linewidth=0</cite> to suppress showing the mean value.</p>
</section>
<section id="using-set-data-generator-for-user-controlled-dynamic-plotting">
<h2>Using <cite>set_data_generator</cite> for user-controlled, dynamic plotting<a class="headerlink" href="#using-set-data-generator-for-user-controlled-dynamic-plotting" title="Link to this heading">¶</a></h2>
<p>There are three examples that use <code class="xref py py-func docutils literal notranslate"><span class="pre">set_data_generator()</span></code> to specify how to
update a plot from a user-supplied function.  As seen in these examples, the
function definied can either return data to update the data, or it can use a
Python geneator to yield the data.  In both cases, you first create a plot (it
can be empty), and then set the function for that plot window to call to grab
new data.  The plot window will then periodically call the function you supply,
with a time interval (in milliseconds) given by the <cite>polltime</cite> argument.  With
a simple function, it might look like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot</span><span class="p">,</span> <span class="n">set_data_generator</span>

<span class="n">npts</span> <span class="o">=</span> <span class="mi">501</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">npts</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">3.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">1.1</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">25</span><span class="o">+</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mf">2.4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">3.7</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">11</span><span class="p">))</span>
<span class="n">z</span> <span class="o">=</span> <span class="mf">4.1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">1.6</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">40</span><span class="o">+</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mf">1.9</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">3.2</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">21</span><span class="p">))</span>

<span class="n">nx</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_more_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">nx</span>
    <span class="n">nx</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">nx</span> <span class="o">&gt;=</span> <span class="n">npts</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">x</span><span class="p">[:</span><span class="n">nx</span><span class="p">],</span> <span class="n">y</span><span class="p">[:</span><span class="n">nx</span><span class="p">]),</span>
            <span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="n">nx</span><span class="p">],</span> <span class="n">z</span><span class="p">[:</span><span class="n">nx</span><span class="p">])]</span>

<span class="c1"># set up initial plot</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="n">nx</span><span class="p">],</span> <span class="n">y</span><span class="p">[:</span><span class="n">nx</span><span class="p">])</span>

<span class="c1"># use data generator to run function to retrieve more data</span>
<span class="n">set_data_generator</span><span class="p">(</span><span class="n">get_more_data</span><span class="p">,</span>  <span class="n">polltime</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;consuming data from function...&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will generate a continuously updating plot adding data as it goes:</p>
<div  class="sphinx-contrib-video-container align-left"><video controls="True" muted="True" preload="auto"><source src="_images/scope_mode_function.mp4" type="video/mp4">capture of images generated from scope_mode_function.py</video></div><p>As a second example, this time using a generator, you might do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot</span><span class="p">,</span> <span class="n">set_data_generator</span>

<span class="c1"># generator of datasets</span>
<span class="n">npts</span> <span class="o">=</span> <span class="mi">501</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">npts</span><span class="p">)</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">1.3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.8</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">nx</span><span class="o">/</span><span class="mi">7</span><span class="p">)),</span>
             <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">1.1</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.6</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">nx</span><span class="o">/</span><span class="mi">43</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">nx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">npts</span><span class="p">))</span>

<span class="k">def</span><span class="w"> </span><span class="nf">more_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;yield next pair of datasets from data generator&quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
            <span class="k">yield</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">break</span>

<span class="c1"># set up an initial plot</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>

<span class="c1"># now set data generator and wait</span>
<span class="n">set_data_generator</span><span class="p">(</span><span class="n">more_data</span><span class="p">,</span>  <span class="n">polltime</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;consuming data from generator...&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>which will generate a plot like this:</p>
<div  class="sphinx-contrib-video-container align-left"><video controls="True" muted="True" preload="auto"><source src="_images/scope_mode_generator.mp4" type="video/mp4">capture of images generated from scope_mode_generator.py</video></div><p>Note that your function should return or yield a list of (x, y) pairs.</p>
<p>As a third example, and by way of comparison with the matplotlib example at
<a class="reference external" href="https://matplotlib.org/stable/gallery/animation/strip_chart.html">https://matplotlib.org/stable/gallery/animation/strip_chart.html</a>, a similar
result can be generated with the somewhat shorter and less involved code
example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This could be comparable to</span>
<span class="c1"># https://matplotlib.org/stable/gallery/animation/strip_chart.html</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">random</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot</span><span class="p">,</span> <span class="n">set_data_generator</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Scope</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nmax</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nmax</span> <span class="o">=</span> <span class="n">nmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tmax</span> <span class="o">=</span> <span class="n">dt</span><span class="o">*</span><span class="n">nmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nmax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="k">if</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.15</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)]</span>

<span class="n">scope</span> <span class="o">=</span> <span class="n">Scope</span><span class="p">(</span><span class="n">nmax</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

<span class="n">plotter</span> <span class="o">=</span> <span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xmax</span><span class="o">=</span><span class="n">scope</span><span class="o">.</span><span class="n">tmax</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=-</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mf">1.05</span><span class="p">,</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s1">&#39;steps-mid&#39;</span><span class="p">)</span>

<span class="n">set_data_generator</span><span class="p">(</span><span class="n">scope</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="n">win</span><span class="o">=</span><span class="n">plotter</span><span class="o">.</span><span class="n">window</span><span class="p">)</span>
</pre></div>
</div>
<p>Unlike with the matplotlib example, which mixes data generation and management
with plotting code, the <code class="xref py py-class docutils literal notranslate"><span class="pre">Scope</span></code> here only generates the code, and
wxmplot functions handles all the plotting.  This code is both shorter and
better designed than the standard matplotlib example.</p>
<div  class="sphinx-contrib-video-container align-left"><video controls="True" muted="True" preload="auto" width="80%"><source src="_images/scope_mode_mpl_compare.mp4" type="video/mp4">capture of images generated from scope_mode_mpl_compare.py</video></div></section>
<section id="displaying-and-image-of-a-tiff-file">
<h2>Displaying and image of a TIFF file<a class="headerlink" href="#displaying-and-image-of-a-tiff-file" title="Link to this heading">¶</a></h2>
<p>Reading a TIFF file and showing the image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">os</span><span class="w"> </span><span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tifffile</span><span class="w"> </span><span class="kn">import</span> <span class="n">imread</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">wxmplot.interactive</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wi</span>

<span class="n">thisdir</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">imgdata</span> <span class="o">=</span>  <span class="n">imread</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">thisdir</span><span class="p">,</span> <span class="s1">&#39;ceo2.tiff&#39;</span><span class="p">))</span>

<span class="n">wi</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">imgdata</span><span class="p">,</span> <span class="n">contrast_level</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>gives:</p>
<a class="reference internal image-reference" href="_images/tifffile_image.png"><img alt="_images/tifffile_image.png" src="_images/tifffile_image.png" style="width: 85%;" />
</a>
</section>
<section id="color-image">
<h2>3-Color Image<a class="headerlink" href="#color-image" title="Link to this heading">¶</a></h2>
<p>If the data array has three dimensions, and has a shape of (NY, NX, 3), it
is assumed to be a 3 color map, holding Red, Green, and Blue intensities.
In this case, the Image Frame will show sliders and min/max controls for
each of the three colors.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">example showing display of R, G, B maps</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wx</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="kn">import</span> <span class="n">exp</span><span class="p">,</span> <span class="n">random</span><span class="p">,</span> <span class="n">arange</span><span class="p">,</span> <span class="n">outer</span><span class="p">,</span> <span class="n">array</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxmplot</span><span class="w"> </span><span class="kn">import</span> <span class="n">ImageFrame</span>

<span class="k">def</span><span class="w"> </span><span class="nf">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">outer</span><span class="p">(</span> <span class="n">exp</span><span class="p">(</span> <span class="o">-</span><span class="p">(((</span><span class="n">y</span><span class="o">-</span><span class="n">y0</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sy</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">exp</span><span class="p">(</span> <span class="o">-</span><span class="p">(((</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sx</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">()</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">ImageFrame</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rgb&#39;</span><span class="p">)</span>
    <span class="n">ny</span><span class="p">,</span> <span class="n">nx</span> <span class="o">=</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">400</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">arange</span><span class="p">(</span><span class="n">nx</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">arange</span><span class="p">(</span><span class="n">ny</span><span class="p">)</span>
    <span class="n">ox</span> <span class="o">=</span>  <span class="n">x</span> <span class="o">/</span> <span class="mf">100.0</span>
    <span class="n">oy</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">y</span> <span class="o">/</span> <span class="mf">200.0</span>
    <span class="n">red</span>  <span class="o">=</span> <span class="mf">0.02</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span>
    <span class="n">red</span> <span class="o">=</span>  <span class="n">red</span> <span class="o">+</span> <span class="p">(</span><span class="mf">6.0</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span>   <span class="mi">76</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">)</span> <span class="o">+</span>
                  <span class="mf">3.0</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">190</span><span class="p">,</span>  <span class="mi">70</span><span class="p">,</span>  <span class="mi">33</span><span class="p">)</span> <span class="o">+</span>
                  <span class="mf">2.0</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span>  <span class="mi">12</span><span class="p">,</span>  <span class="mi">6</span><span class="p">))</span>
    <span class="n">green</span>  <span class="o">=</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span>
    <span class="n">green</span> <span class="o">=</span> <span class="n">green</span>  <span class="o">+</span> <span class="p">(</span><span class="mf">5.0</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">173</span><span class="p">,</span>  <span class="mi">98</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">9</span><span class="p">)</span> <span class="o">+</span>
                      <span class="mf">3.2</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">270</span><span class="p">,</span> <span class="mi">230</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">63</span><span class="p">))</span>

    <span class="n">blue</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">)</span>
    <span class="n">blue</span> <span class="o">=</span> <span class="n">blue</span> <span class="o">+</span> <span class="p">(</span><span class="mf">2.9</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">265</span><span class="p">,</span>  <span class="mi">78</span><span class="p">,</span>  <span class="mi">23</span><span class="p">)</span> <span class="o">+</span>
                   <span class="mf">3.5</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">185</span><span class="p">,</span>  <span class="mi">95</span><span class="p">,</span>  <span class="mi">22</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span> <span class="o">+</span>
                   <span class="mf">7.0</span><span class="o">*</span><span class="n">gauss2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span>  <span class="mi">310</span><span class="p">,</span>  <span class="mi">40</span><span class="p">,</span>  <span class="mi">133</span><span class="p">))</span>

    <span class="n">dat</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">])</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">ox</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">oy</span><span class="p">,</span>
                  <span class="n">subtitles</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;red&#39;</span><span class="p">:</span><span class="s1">&#39;Red Image&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">:</span> <span class="s1">&#39;Green Blob&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">:</span> <span class="s1">&#39;other&#39;</span><span class="p">})</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</pre></div>
</div>
<p>giving a plot that would look like this:</p>
<a class="reference internal image-reference" href="_images/image_3color.png"><img alt="_images/image_3color.png" src="_images/image_3color.png" style="width: 85%;" />
</a>
<p>Note that there is also an Image-&gt;Toggle Background Color
(Black/White) menu selection that can switch the zero intensity color
between black and white.  The same image with a white background looks
like:</p>
<a class="reference internal image-reference" href="_images/image_3color_white.png"><img alt="_images/image_3color_white.png" src="_images/image_3color_white.png" style="width: 85%;" />
</a>
<p>This gives a slightly different view of the same data, with results that
may be more suitable for printed documents and presentations.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">wxmplot Examples</a><ul>
<li><a class="reference internal" href="#dynamic-examples-not-shown-here">Dynamic examples not shown here</a></li>
<li><a class="reference internal" href="#scatterplot-example">Scatterplot Example</a></li>
<li><a class="reference internal" href="#plotting-with-errorbars">Plotting with errorbars</a></li>
<li><a class="reference internal" href="#plotting-data-from-a-datafile">Plotting data from a datafile</a></li>
<li><a class="reference internal" href="#plotting-data-with-discrete-values">Plotting data with discrete values</a></li>
<li><a class="reference internal" href="#using-left-and-right-axes">Using Left and Right Axes</a></li>
<li><a class="reference internal" href="#using-3-and-4-y-axes">Using 3 and 4 Y Axes</a></li>
<li><a class="reference internal" href="#plotting-with-alpha-fill-to-show-area-under-a-curve">Plotting with alpha-fill to show area under a curve</a></li>
<li><a class="reference internal" href="#plotting-with-alpha-fill-to-show-uncertainty">Plotting with alpha-fill to show uncertainty</a></li>
<li><a class="reference internal" href="#using-set-data-generator-for-user-controlled-dynamic-plotting">Using <cite>set_data_generator</cite> for user-controlled, dynamic plotting</a></li>
<li><a class="reference internal" href="#displaying-and-image-of-a-tiff-file">Displaying and image of a TIFF file</a></li>
<li><a class="reference internal" href="#color-image">3-Color Image</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="imagepanel.html"
                          title="previous chapter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImagePanel</span></code>:  A wx.Panel for Image Display</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="other.html"
                          title="next chapter">Speciality wxmplot displays</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/examples.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="other.html" title="Speciality wxmplot displays"
             >next</a> |</li>
        <li class="right" >
          <a href="imagepanel.html" title="ImagePanel: A wx.Panel for Image Display"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">WXMPLOT</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">wxmplot Examples</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025-08-20, Matthew Newville, The University of Chicago.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>